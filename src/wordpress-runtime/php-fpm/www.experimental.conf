[www]
user = www-data ; Revert to www-data user
group = www-data ; Revert to www-data group
listen = 0.0.0.0:9000
listen.mode = 0666
pm          = dynamic
; Based on typical memory usage per child (e.g., 30-60MB), adjust max_children
; A starting point for ~512MB RAM might be 8-10, for 1GB maybe 15-20. Test!
pm.max_children   = 10 ; Increased from 5 as a starting point for testing
pm.start_servers  = 3  ; Adjusted proportionally (e.g., ~30% of max_children)
pm.min_spare_servers = 2  ; Adjusted proportionally (e.g., ~20% of max_children)
pm.max_spare_servers = 5  ; Adjusted proportionally (e.g., ~50% of max_children)

; error_log and log_level are now handled globally by 00-logging.conf
; error_log = /dev/stderr
; log_level = notice
catch_workers_output = yes  ; funnel workers' output to the same place
; decorate_workers_output = no ; Optional: uncomment to remove pid/timestamp decoration

php_flag[display_errors] = off ; SECURITY: Should be off in production
php_admin_flag[log_errors] = on

; Pass relevant environment variables to PHP
env[WORDPRESS_DB_HOST] = $WORDPRESS_DB_HOST
env[WORDPRESS_DB_USER] = $WORDPRESS_DB_USER
env[WORDPRESS_DB_PASSWORD] = $WORDPRESS_DB_PASSWORD
env[WORDPRESS_DB_NAME] = $WORDPRESS_DB_NAME
env[GCS_BUCKET_NAME] = $GCS_BUCKET_NAME
